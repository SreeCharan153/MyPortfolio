<?xml version="1.0" encoding="utf-8" ?>
<svg baseProfile="tiny" height="800" version="1.2" width="1200" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"><defs /><rect fill="#0b0f14" height="800" width="1200" x="0" y="0" /><text fill="#e6edf3" font-family="Inter, Arial" font-size="28px" text-anchor="middle" x="600.0" y="50">Secure Banking System – Architecture</text><text fill="#9fb3c8" font-family="Inter, Arial" font-size="14px" text-anchor="middle" x="600.0" y="75">FastAPI • PostgreSQL • JWT • RBAC • Audit Logging • Atomic Transactions</text><g><rect fill="#131a22" height="140" rx="12" ry="12" stroke="#2a3540" stroke-width="2" width="280" x="60" y="130" /><text fill="#e6edf3" font-family="Inter, Arial" font-size="20px" x="76" y="164">Client (Next.js UI)</text><text fill="#9fb3c8" font-family="Inter, Arial" font-size="14px" x="76" y="188">Login • Transfers • Balance • History</text></g><g><rect fill="#0ea5e9" height="26" rx="13" ry="13" width="108" x="76" y="208" /><text fill="#0b0f14" font-family="Inter, Arial" font-size="13px" x="88" y="226">HTTPS / JSON</text></g><g><rect fill="#131a22" height="240" rx="12" ry="12" stroke="#2a3540" stroke-width="2" width="320" x="460" y="110" /><text fill="#e6edf3" font-family="Inter, Arial" font-size="20px" x="476" y="144">FastAPI Backend</text><text fill="#9fb3c8" font-family="Inter, Arial" font-size="14px" x="476" y="168">Routers: /auth, /accounts, /transactions, /audit</text></g><g><rect fill="#22c55e" height="26" rx="13" ry="13" width="304" x="476" y="184" /><text fill="#0b0f14" font-family="Inter, Arial" font-size="13px" x="488" y="202">JWT + Refresh Tokens (HTTP-only cookies)</text></g><g><rect fill="#22c55e" height="26" rx="13" ry="13" width="234" x="476" y="218" /><text fill="#0b0f14" font-family="Inter, Arial" font-size="13px" x="488" y="236">RBAC (admin, teller, customer)</text></g><g><rect fill="#22c55e" height="26" rx="13" ry="13" width="185" x="476" y="252" /><text fill="#0b0f14" font-family="Inter, Arial" font-size="13px" x="488" y="270">Atomic SQL Transactions</text></g><g><rect fill="#22c55e" height="26" rx="13" ry="13" width="157" x="476" y="286" /><text fill="#0b0f14" font-family="Inter, Arial" font-size="13px" x="488" y="304">Pydantic Validation</text></g><g><rect fill="#22c55e" height="26" rx="13" ry="13" width="255" x="476" y="320" /><text fill="#0b0f14" font-family="Inter, Arial" font-size="13px" x="488" y="338">Audit Middleware (IP, UA, action)</text></g><g><rect fill="#131a22" height="460" rx="12" ry="12" stroke="#2a3540" stroke-width="2" width="280" x="880" y="130" /><text fill="#e6edf3" font-family="Inter, Arial" font-size="20px" x="896" y="164">PostgreSQL (public schema)</text><text fill="#9fb3c8" font-family="Inter, Arial" font-size="14px" x="896" y="188">Normalized tables + indexes</text></g><g><rect fill="#0f1520" height="120" rx="10" ry="10" stroke="#2a3540" width="248" x="896" y="190" /><text fill="#e6edf3" font-family="Inter, Arial" font-size="16px" x="908" y="214">users</text><text fill="#9fb3c8" font-family="Inter, Arial" font-size="12px" x="908" y="234">• id (serial pk)</text><text fill="#9fb3c8" font-family="Inter, Arial" font-size="12px" x="908" y="252">• user_name unique</text><text fill="#9fb3c8" font-family="Inter, Arial" font-size="12px" x="908" y="270">• password_hash</text><text fill="#9fb3c8" font-family="Inter, Arial" font-size="12px" x="908" y="288">• role</text><text fill="#9fb3c8" font-family="Inter, Arial" font-size="12px" x="908" y="306">• created_at</text></g><g><rect fill="#0f1520" height="120" rx="10" ry="10" stroke="#2a3540" width="248" x="896" y="330" /><text fill="#e6edf3" font-family="Inter, Arial" font-size="16px" x="908" y="354">accounts</text><text fill="#9fb3c8" font-family="Inter, Arial" font-size="12px" x="908" y="374">• id (serial pk)</text><text fill="#9fb3c8" font-family="Inter, Arial" font-size="12px" x="908" y="392">• account_no unique</text><text fill="#9fb3c8" font-family="Inter, Arial" font-size="12px" x="908" y="410">• user_id → users.id</text><text fill="#9fb3c8" font-family="Inter, Arial" font-size="12px" x="908" y="428">• balance numeric(12,2)</text><text fill="#9fb3c8" font-family="Inter, Arial" font-size="12px" x="908" y="446">• is_locked, failed_attempts</text></g><g><rect fill="#0f1520" height="120" rx="10" ry="10" stroke="#2a3540" width="248" x="896" y="470" /><text fill="#e6edf3" font-family="Inter, Arial" font-size="16px" x="908" y="494">audit_logs</text><text fill="#9fb3c8" font-family="Inter, Arial" font-size="12px" x="908" y="514">• id (serial pk)</text><text fill="#9fb3c8" font-family="Inter, Arial" font-size="12px" x="908" y="532">• actor (user)</text><text fill="#9fb3c8" font-family="Inter, Arial" font-size="12px" x="908" y="550">• action, details JSONB</text><text fill="#9fb3c8" font-family="Inter, Arial" font-size="12px" x="908" y="568">• ip, user_agent</text><text fill="#9fb3c8" font-family="Inter, Arial" font-size="12px" x="908" y="586">• timestamp</text></g><line stroke="#9fb3c8" stroke-width="2" x1="340" x2="460" y1="210" y2="190" /><polygon fill="#9fb3c8" points="460,190 448.9853,184.7392 451.2869,198.5487" /><text fill="#9fb3c8" font-family="Inter, Arial" font-size="12px" text-anchor="middle" x="400.0" y="192.0">REST / WebSockets</text><line stroke="#9fb3c8" stroke-width="2" x1="1100" x2="880" y1="210" y2="230" /><polygon fill="#9fb3c8" points="880,230 890.5927,236.0659 889.3252,222.1234" /><text fill="#9fb3c8" font-family="Inter, Arial" font-size="12px" text-anchor="middle" x="990.0" y="212.0">SQL (psycopg2/asyncpg)</text><line stroke="#9fb3c8" stroke-width="2" x1="1100" x2="880" y1="250" y2="370" /><polygon fill="#9fb3c8" points="880,370 892.1309,371.3567 885.427,359.0662" /><text fill="#9fb3c8" font-family="Inter, Arial" font-size="12px" text-anchor="middle" x="990.0" y="302.0">Transactions (BEGIN/COMMIT)</text><line stroke="#9fb3c8" stroke-width="2" x1="1100" x2="880" y1="290" y2="510" /><polygon fill="#9fb3c8" points="880,510 892.0208,507.8787 882.1213,497.9792" /><text fill="#9fb3c8" font-family="Inter, Arial" font-size="12px" text-anchor="middle" x="990.0" y="392.0">Audit Logs</text><g><rect fill="#131a22" height="260" rx="12" ry="12" stroke="#2a3540" stroke-width="2" width="720" x="60" y="330" /><text fill="#e6edf3" font-family="Inter, Arial" font-size="20px" x="76" y="364">Security &amp; Consistency Notes</text></g><text fill="#9fb3c8" font-family="Inter, Arial" font-size="14px" x="76" y="394">• Store password_hash (bcrypt/argon2), never plain PIN/password.</text><text fill="#9fb3c8" font-family="Inter, Arial" font-size="14px" x="76" y="418">• Use JWT (access + refresh) in HTTP-only cookies; rotate refresh tokens.</text><text fill="#9fb3c8" font-family="Inter, Arial" font-size="14px" x="76" y="442">• Enforce RBAC; validate inputs with Pydantic.</text><text fill="#9fb3c8" font-family="Inter, Arial" font-size="14px" x="76" y="466">• Use NUMERIC(12,2) for money, or integer paise; avoid REAL/FLOAT.</text><text fill="#9fb3c8" font-family="Inter, Arial" font-size="14px" x="76" y="490">• Wrap deposits/withdrawals/transfers in a single DB transaction.</text><text fill="#9fb3c8" font-family="Inter, Arial" font-size="14px" x="76" y="514">• Rate-limit sensitive endpoints; log IP &amp; user-agent to audit_logs.</text></svg>